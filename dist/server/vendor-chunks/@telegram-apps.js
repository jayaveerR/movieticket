"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps";
exports.ids = ["vendor-chunks/@telegram-apps"];
exports.modules = {

/***/ "(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@telegram-apps/bridge/dist/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ re),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ ne),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ He),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Je),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ Be),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ge),\n/* harmony export */   EnhancedPromise: () => (/* binding */ S),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ te),\n/* harmony export */   camelToKebab: () => (/* binding */ ct),\n/* harmony export */   camelToSnake: () => (/* binding */ it),\n/* harmony export */   captureSameReq: () => (/* binding */ et),\n/* harmony export */   compareVersions: () => (/* binding */ tt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ k),\n/* harmony export */   createLogger: () => (/* binding */ ke),\n/* harmony export */   createPostEvent: () => (/* binding */ dt),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ L),\n/* harmony export */   defineEventHandlers: () => (/* binding */ bt),\n/* harmony export */   deleteCssVar: () => (/* binding */ ft),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ x),\n/* harmony export */   getStorageValue: () => (/* binding */ xe),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ Q),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Et),\n/* harmony export */   isAbortError: () => (/* binding */ ot),\n/* harmony export */   isCanceledError: () => (/* binding */ st),\n/* harmony export */   isIframe: () => (/* binding */ Ne),\n/* harmony export */   isTMA: () => (/* binding */ _t),\n/* harmony export */   isTimeoutError: () => (/* binding */ nt),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ lt),\n/* harmony export */   off: () => (/* binding */ wt),\n/* harmony export */   on: () => (/* binding */ Fe),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ gt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ yt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Ye),\n/* harmony export */   setCssVar: () => (/* binding */ pt),\n/* harmony export */   setStorageValue: () => (/* binding */ We),\n/* harmony export */   sleep: () => (/* binding */ at),\n/* harmony export */   snakeToCamel: () => (/* binding */ ut),\n/* harmony export */   subscribe: () => (/* binding */ ht),\n/* harmony export */   supports: () => (/* binding */ H),\n/* harmony export */   unsubscribe: () => (/* binding */ mt)\n/* harmony export */ });\nclass d extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, d.prototype);\n  }\n}\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", me = \"ERR_UNEXPECTED_VALUE\", de = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const r = {};\n  for (const n in e) {\n    const o = e[n];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = n, a = o) : [s, a] = o;\n    try {\n      const c = a(t(s));\n      c !== void 0 && (r[n] = c);\n    } catch (c) {\n      throw new d(\n        K,\n        `Parser for \"${n}\" property failed${s === n ? \"\" : `. Source field: \"${s}\"`}`,\n        c\n      );\n    }\n  }\n  return r;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (r) {\n      throw new d(he, { cause: r });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new d(me);\n  return t;\n}\nfunction g(e, t) {\n  return (r) => {\n    const n = (o) => {\n      if (!(r && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new d(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      n,\n      {\n        isValid(o) {\n          try {\n            return n(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (r) => {\n    const n = Z(r);\n    return V(e, (o) => n[o]);\n  });\n}\nfunction R(e) {\n  throw new d(de, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && R(r);\n    const n = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return V(e, (o) => {\n      const s = n.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction j(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), r = P(!0), n = _(), o = _(!0), s = $(!0), a = l(j({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: n,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    j({\n      authDate: Ee(),\n      canSendAfter: r,\n      chat: l(\n        j({\n          id: t,\n          type: n,\n          title: n,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: n,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      signature: n,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let n = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      n += t[1 + o].repeat(2);\n    return n;\n  }\n  const r = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((n, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return n + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), I = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((r, [n, o]) => (r[we(n)] = t(o), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction W(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, r]) => [G(t), r])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), r = _(!0), n = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", n],\n    defaultColors: [\"tgWebAppDefaultColors\", I(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", n],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", n],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", I()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Se(e) {\n  const {\n    initDataRaw: t,\n    startParam: r,\n    showSettings: n,\n    botInline: o,\n    fullscreen: s,\n    defaultColors: a\n  } = e, c = new URLSearchParams();\n  return c.set(\"tgWebAppPlatform\", e.platform), c.set(\"tgWebAppThemeParams\", /* @__PURE__ */ W(e.themeParams)), c.set(\"tgWebAppVersion\", e.version), t && c.set(\"tgWebAppData\", t), r && c.set(\"tgWebAppStartParam\", r), typeof n == \"boolean\" && c.set(\"tgWebAppShowSettings\", n ? \"1\" : \"0\"), typeof o == \"boolean\" && c.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && c.set(\"tgWebAppFullscreen\", s ? \"1\" : \"0\"), a && c.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ W(a)), c.toString();\n}\nconst X = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Y = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction $e(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Y() })()\n});\nfunction Q(e) {\n  return Ce().isValid(e);\n}\nfunction Ne() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar De = Object.defineProperty, je = (e, t, r) => t in e ? De(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t, r) => je(e, typeof t != \"symbol\" ? t + \"\" : t, r);\nclass b extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction te(e, t, r) {\n  return e.addEventListener(t, r), () => e.removeEventListener(t, r);\n}\nfunction k(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((r) => {\n        r();\n      });\n    }\n  ];\n}\nfunction Ue(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction L(e) {\n  return (t) => Ue(t, e);\n}\nconst re = \"ERR_ABORTED\", ne = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(re, { cause: e });\n}\nconst nt = L(oe), ot = L(re), st = L(ne);\nfunction F(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s, a;\n    super((c, i) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return i(M(u.reason));\n      const [f, h] = k(), m = (E) => (...ge) => (h(), E(...ge)), T = new AbortController(), { signal: A } = T;\n      a = m((E) => {\n        T.abort(E), i(E);\n      }), s = m(c), u && f(\n        te(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const E = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(E);\n        });\n      }\n      n && n(s, a, A);\n    }), ee(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new w((n, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(n, o) : n(a);\n      } catch (a) {\n        o(a);\n      }\n    }, r);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(ne));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return F(super.then(t, r), this);\n  }\n}\nfunction J(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass S extends w {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s;\n    super((a, c, i) => {\n      s = a, n && n(a, c, i);\n    }, o), ee(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new S(\n      (n, o, s) => w.withFn(t, { abortSignal: s }).then(n, o),\n      r\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new S((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new S((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return J(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return J(super.then(t, r), this);\n  }\n}\nfunction at(e, t) {\n  return new w((r) => {\n    setTimeout(r, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction We(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction xe(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction it(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction ke(e, t) {\n  t || (t = {});\n  const {\n    textColor: r,\n    bgColor: n,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...c) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const i = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${i};background-color: lightblue;color:black`,\n      \"\",\n      `${i};${r ? `color:${r};` : \"\"}${n ? `background-color:${n}` : \"\"}`,\n      ...c\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction ft(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Le(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction y(e, t) {\n  t || (t = {});\n  const r = t.equals || Object.is;\n  let n = [], o = e;\n  const s = (u) => {\n    if (!r(o, u)) {\n      const f = o;\n      o = u, Le(i, () => {\n        [...n].forEach(([h, m]) => {\n          h(u, f), m && c(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const c = (u, f) => {\n    const h = a(f), m = n.findIndex(([T, A]) => T === u && A.once === h.once && A.signal === h.signal);\n    m >= 0 && n.splice(m, 1);\n  }, i = Object.assign(\n    function() {\n      return Oe(i), o;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return n.push([u, a(f)]), () => c(u, f);\n      },\n      unsub: c,\n      unsubAll() {\n        n = n.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return i;\n}\nconst U = [];\nfunction Oe(e) {\n  U.length && U[U.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ y(!1), [O, qe] = /* @__PURE__ */ ke(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), Ie = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Me(e) {\n  const t = window, [, r] = k(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    te(t, \"message\", (n) => {\n      if (n.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = X()(n.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, c = Ie[s];\n      try {\n        const i = c ? c()(a) : a;\n        O(\"Event received:\", i ? { eventType: s, eventData: i } : { eventType: s }), e([s, i]);\n      } catch (i) {\n        qe(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          i\n        );\n      }\n    })\n  );\n  return r;\n}\nconst C = /* @__PURE__ */ y(), N = /* @__PURE__ */ y();\nfunction ce() {\n  return N() || N.set(Me(C.set)), C;\n}\nconst v = /* @__PURE__ */ y({});\nfunction ie(e) {\n  let t = v()[e];\n  return t || (t = /* @__PURE__ */ y(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ce().sub((r) => {\n    r && r[0] === e && t.set(r[1]);\n  }), v.set({ ...v(), [e]: t })), t;\n}\nfunction Fe(e, t, r) {\n  return ie(e).sub(t, r);\n}\nconst Je = \"ERR_METHOD_UNSUPPORTED\", Be = \"ERR_RETRIEVE_LP_FAILED\", He = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ge = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ y(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const r = window;\n  if (Q(r)) {\n    r.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const n = JSON.stringify({ eventType: e, eventData: t });\n  if (Ne())\n    return r.parent.postMessage(n, ue());\n  const { external: o } = r;\n  if (l({ notify: Y() })().isValid(o)) {\n    o.notify(n);\n    return;\n  }\n  throw new b(Ge);\n}\nfunction fe(e, t, r) {\n  r || (r = {});\n  const { capture: n } = r, [o, s] = k();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((c) => {\n      o(\n        Fe(c, (i) => {\n          (!n || (Array.isArray(t) ? n({\n            event: c,\n            payload: i\n          }) : n(i))) && a(i);\n        })\n      );\n    }), (r.postEvent || pe)(e, r.params);\n  }, r).finally(s);\n}\nfunction q(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return q(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ve() {\n  return _e(window.location.href);\n}\nfunction Ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst ze = \"launchParams\";\nfunction Xe() {\n  return q(xe(ze) || \"\");\n}\nfunction le(e) {\n  We(\"launchParams\", /* @__PURE__ */ Se(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Ye() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ve,\n    // Then, try using the lower level API - window.performance.\n    Ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Xe\n  ])\n    try {\n      const r = t();\n      return le(r), r;\n    } catch (r) {\n      e.push(r);\n    }\n  throw new b(Be, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Ye(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (Q(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction x(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Qe(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: r } = X()(t);\n      r === \"web_app_request_theme\" && x(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ W(e))\n      }), r === \"web_app_request_viewport\" && x(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction lt(e) {\n  var n;\n  const t = typeof e == \"string\" ? q(e) : e;\n  le(t);\n  const r = (n = window.TelegramWebviewProxy) == null ? void 0 : n.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      Qe(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), r == null || r(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction bt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((r, n, o) => {\n      if (n === o.length - 1) {\n        t[r] = x;\n        return;\n      }\n      r in t || (t[r] = {}), t = t[r];\n    });\n  });\n}\nfunction gt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction wt(e, t, r) {\n  ie(e).unsub(t, r);\n}\nfunction ht(e, t) {\n  return ce().sub(e, t);\n}\nfunction mt(e, t) {\n  C.unsub(e, t);\n}\nfunction et(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction B(e) {\n  return e.split(\".\").map(Number);\n}\nfunction tt(e, t) {\n  const r = B(e), n = B(t), o = Math.max(r.length, n.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = r[s] || 0, c = n[s] || 0;\n    if (a !== c)\n      return a > c ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return tt(e, t) <= 0;\n}\nfunction H(e, t, r) {\n  if (typeof r == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", r);\n      if (t === \"try_browser\")\n        return p(\"7.6\", r);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", r);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", r);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", r);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    case \"web_app_request_safe_area\":\n    case \"web_app_request_content_safe_area\":\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n    case \"web_app_set_emoji_status\":\n    case \"web_app_add_to_home_screen\":\n    case \"web_app_check_home_screen\":\n    case \"web_app_request_emoji_status_access\":\n      return p(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction dt(e, t) {\n  t || (t = \"strict\");\n  const r = typeof t == \"function\" ? t : (n) => {\n    const { method: o, version: s } = n;\n    let a, c;\n    if (\"param\" in n ? (a = `Parameter \"${n.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, c = He) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, c = Je), t === \"strict\")\n      throw new b(c, a);\n    return console.warn(a);\n  };\n  return (n, o) => H(n, e) ? $e(o) && n === \"web_app_set_header_color\" && \"color\" in o && !H(n, \"color\", e) ? r({ version: e, method: n, param: \"color\" }) : pe(n, o) : r({ version: e, method: n });\n}\nfunction Et(e, t, r, n) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...n || {},\n    params: { method: e, params: t, req_id: r },\n    capture: et(r)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction yt() {\n  var e;\n  (e = N()) == null || e(), [\n    ...Object.values(v()),\n    v,\n    C,\n    N,\n    ue,\n    ae\n  ].forEach(rt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvYnJpZGdlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRSxtQkFBbUIsbUNBQW1DLEVBQUUsR0FBRztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsMENBQTBDLFFBQVEsUUFBUSxFQUFFLCtDQUErQyxFQUFFLDZCQUE2QixFQUFFLHdDQUF3QyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1Q0FBdUMsbUJBQW1CLHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQSxHQUFHLFVBQVUscUJBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1ib2lsZXJwbGF0ZS10ZW1wbGF0ZS8uL25vZGVfbW9kdWxlcy9AdGVsZWdyYW0tYXBwcy9icmlkZ2UvZGlzdC9pbmRleC5qcz9jMGQ5Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIGQgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHQsIHIsIG4pIHtcbiAgICBzdXBlcihcbiAgICAgIHR5cGVvZiByID09IFwib2JqZWN0XCIgPyByLm1lc3NhZ2UgOiByIHx8IHQsXG4gICAgICB7XG4gICAgICAgIGNhdXNlOiB0eXBlb2YgciA9PSBcIm9iamVjdFwiID8gci5jYXVzZSA6IG5cbiAgICAgIH1cbiAgICApLCB0aGlzLnR5cGUgPSB0LCB0aGlzLm5hbWUgPSBcIlR5cGVkRXJyb3JcIiwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGQucHJvdG90eXBlKTtcbiAgfVxufVxuZnVuY3Rpb24gRyhlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgXyR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gd2UoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9fW2Etel0vZywgKHQpID0+IHRbMV0udG9VcHBlckNhc2UoKSk7XG59XG5jb25zdCBoZSA9IFwiRVJSX0lOVkFMSURfVkFMVUVcIiwgbWUgPSBcIkVSUl9VTkVYUEVDVEVEX1ZBTFVFXCIsIGRlID0gXCJFUlJfVU5FWFBFQ1RFRF9UWVBFXCIsIEsgPSBcIkVSUl9QQVJTRVwiO1xuZnVuY3Rpb24gVihlLCB0KSB7XG4gIGNvbnN0IHIgPSB7fTtcbiAgZm9yIChjb25zdCBuIGluIGUpIHtcbiAgICBjb25zdCBvID0gZVtuXTtcbiAgICBpZiAoIW8pXG4gICAgICBjb250aW51ZTtcbiAgICBsZXQgcywgYTtcbiAgICB0eXBlb2YgbyA9PSBcImZ1bmN0aW9uXCIgPyAocyA9IG4sIGEgPSBvKSA6IFtzLCBhXSA9IG87XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGMgPSBhKHQocykpO1xuICAgICAgYyAhPT0gdm9pZCAwICYmIChyW25dID0gYyk7XG4gICAgfSBjYXRjaCAoYykge1xuICAgICAgdGhyb3cgbmV3IGQoXG4gICAgICAgIEssXG4gICAgICAgIGBQYXJzZXIgZm9yIFwiJHtufVwiIHByb3BlcnR5IGZhaWxlZCR7cyA9PT0gbiA/IFwiXCIgOiBgLiBTb3VyY2UgZmllbGQ6IFwiJHtzfVwiYH1gLFxuICAgICAgICBjXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcjtcbn1cbmZ1bmN0aW9uIFooZSkge1xuICBsZXQgdCA9IGU7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgIHRyeSB7XG4gICAgICB0ID0gSlNPTi5wYXJzZSh0KTtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICB0aHJvdyBuZXcgZChoZSwgeyBjYXVzZTogciB9KTtcbiAgICB9XG4gIGlmICh0eXBlb2YgdCAhPSBcIm9iamVjdFwiIHx8ICF0IHx8IEFycmF5LmlzQXJyYXkodCkpXG4gICAgdGhyb3cgbmV3IGQobWUpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIGcoZSwgdCkge1xuICByZXR1cm4gKHIpID0+IHtcbiAgICBjb25zdCBuID0gKG8pID0+IHtcbiAgICAgIGlmICghKHIgJiYgbyA9PT0gdm9pZCAwKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdChvKTtcbiAgICAgICAgfSBjYXRjaCAocykge1xuICAgICAgICAgIHRocm93IG5ldyBkKEssIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBcIiR7ZX1cIiB0cmFuc2Zvcm1lciBmYWlsZWQgdG8gcGFyc2UgdGhlIHZhbHVlYCxcbiAgICAgICAgICAgIGNhdXNlOiBzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmFzc2lnbihcbiAgICAgIG4sXG4gICAgICB7XG4gICAgICAgIGlzVmFsaWQobykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbihvKSwgITA7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGwoZSwgdCkge1xuICByZXR1cm4gZyh0IHx8IFwib2JqZWN0XCIsIChyKSA9PiB7XG4gICAgY29uc3QgbiA9IFoocik7XG4gICAgcmV0dXJuIFYoZSwgKG8pID0+IG5bb10pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFIoZSkge1xuICB0aHJvdyBuZXcgZChkZSwgYFVuZXhwZWN0ZWQgdmFsdWUgcmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7XG59XG5jb25zdCAkID0gZyhcImJvb2xlYW5cIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwiYm9vbGVhblwiKVxuICAgIHJldHVybiBlO1xuICBjb25zdCB0ID0gU3RyaW5nKGUpO1xuICBpZiAodCA9PT0gXCIxXCIgfHwgdCA9PT0gXCJ0cnVlXCIpXG4gICAgcmV0dXJuICEwO1xuICBpZiAodCA9PT0gXCIwXCIgfHwgdCA9PT0gXCJmYWxzZVwiKVxuICAgIHJldHVybiAhMTtcbiAgUihlKTtcbn0pLCBfID0gZyhcInN0cmluZ1wiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBlLnRvU3RyaW5nKCk7XG4gIFIoZSk7XG59KSwgUCA9IGcoXCJudW1iZXJcIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIGU7XG4gIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgdCA9IE51bWJlcihlKTtcbiAgICBpZiAoIU51bWJlci5pc05hTih0KSlcbiAgICAgIHJldHVybiB0O1xuICB9XG4gIFIoZSk7XG59KSwgRWUgPSBnKFwiZGF0ZVwiLCAoZSkgPT4gZSBpbnN0YW5jZW9mIERhdGUgPyBlIDogbmV3IERhdGUoUCgpKGUpICogMWUzKSk7XG5mdW5jdGlvbiB6KGUsIHQpIHtcbiAgcmV0dXJuIGcodCB8fCBcInNlYXJjaFBhcmFtc1wiLCAocikgPT4ge1xuICAgIHR5cGVvZiByICE9IFwic3RyaW5nXCIgJiYgIShyIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSAmJiBSKHIpO1xuICAgIGNvbnN0IG4gPSB0eXBlb2YgciA9PSBcInN0cmluZ1wiID8gbmV3IFVSTFNlYXJjaFBhcmFtcyhyKSA6IHI7XG4gICAgcmV0dXJuIFYoZSwgKG8pID0+IHtcbiAgICAgIGNvbnN0IHMgPSBuLmdldChvKTtcbiAgICAgIHJldHVybiBzID09PSBudWxsID8gdm9pZCAwIDogcztcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBqKGUpIHtcbiAgZm9yIChjb25zdCB0IGluIGUpXG4gICAgZVt0XSA9IFtHKHQpLCBlW3RdXTtcbiAgcmV0dXJuIGU7XG59XG5jb25zdCB5ZSA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBQKCksIHIgPSBQKCEwKSwgbiA9IF8oKSwgbyA9IF8oITApLCBzID0gJCghMCksIGEgPSBsKGooe1xuICAgIGFkZGVkVG9BdHRhY2htZW50TWVudTogcyxcbiAgICBhbGxvd3NXcml0ZVRvUG06IHMsXG4gICAgZmlyc3ROYW1lOiBuLFxuICAgIGlkOiB0LFxuICAgIGlzQm90OiBzLFxuICAgIGlzUHJlbWl1bTogcyxcbiAgICBsYW5ndWFnZUNvZGU6IG8sXG4gICAgbGFzdE5hbWU6IG8sXG4gICAgcGhvdG9Vcmw6IG8sXG4gICAgdXNlcm5hbWU6IG9cbiAgfSksIFwiVXNlclwiKSghMCk7XG4gIHJldHVybiB6KFxuICAgIGooe1xuICAgICAgYXV0aERhdGU6IEVlKCksXG4gICAgICBjYW5TZW5kQWZ0ZXI6IHIsXG4gICAgICBjaGF0OiBsKFxuICAgICAgICBqKHtcbiAgICAgICAgICBpZDogdCxcbiAgICAgICAgICB0eXBlOiBuLFxuICAgICAgICAgIHRpdGxlOiBuLFxuICAgICAgICAgIHBob3RvVXJsOiBvLFxuICAgICAgICAgIHVzZXJuYW1lOiBvXG4gICAgICAgIH0pLFxuICAgICAgICBcIkNoYXRcIlxuICAgICAgKSghMCksXG4gICAgICBjaGF0SW5zdGFuY2U6IG8sXG4gICAgICBjaGF0VHlwZTogbyxcbiAgICAgIGhhc2g6IG4sXG4gICAgICBxdWVyeUlkOiBvLFxuICAgICAgcmVjZWl2ZXI6IGEsXG4gICAgICBzdGFydFBhcmFtOiBvLFxuICAgICAgc2lnbmF0dXJlOiBuLFxuICAgICAgdXNlcjogYVxuICAgIH0pLFxuICAgIFwiaW5pdERhdGFcIlxuICApKGUpO1xufTtcbmZ1bmN0aW9uIHZlKGUpIHtcbiAgcmV0dXJuIC9eI1tcXGRhLWZdezZ9JC9pLnRlc3QoZSk7XG59XG5mdW5jdGlvbiBQZShlKSB7XG4gIHJldHVybiAvXiNbXFxkYS1mXXszfSQvaS50ZXN0KGUpO1xufVxuZnVuY3Rpb24gUmUoZSkge1xuICBjb25zdCB0ID0gZS5yZXBsYWNlKC9cXHMvZywgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHZlKHQpKVxuICAgIHJldHVybiB0O1xuICBpZiAoUGUodCkpIHtcbiAgICBsZXQgbiA9IFwiI1wiO1xuICAgIGZvciAobGV0IG8gPSAwOyBvIDwgMzsgbyArPSAxKVxuICAgICAgbiArPSB0WzEgKyBvXS5yZXBlYXQoMik7XG4gICAgcmV0dXJuIG47XG4gIH1cbiAgY29uc3QgciA9IHQubWF0Y2goL15yZ2JcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KVxcKSQvKSB8fCB0Lm1hdGNoKC9ecmdiYVxcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pLFxcZHsxLDN9XFwpJC8pO1xuICBpZiAoIXIpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBcIiR7ZX1cIiBkb2VzIG5vdCBzYXRpc2Z5IGFueSBvZiBrbm93biBSR0IgZm9ybWF0cy5gKTtcbiAgcmV0dXJuIHIuc2xpY2UoMSkucmVkdWNlKChuLCBvKSA9PiB7XG4gICAgY29uc3QgcyA9IHBhcnNlSW50KG8sIDEwKS50b1N0cmluZygxNik7XG4gICAgcmV0dXJuIG4gKyAocy5sZW5ndGggPT09IDEgPyBcIjBcIiA6IFwiXCIpICsgcztcbiAgfSwgXCIjXCIpO1xufVxuY29uc3QgVGUgPSBnKFwicmdiXCIsIChlKSA9PiBSZShfKCkoZSkpKSwgSSA9IGcoXG4gIFwidGhlbWVQYXJhbXNcIixcbiAgKGUpID0+IHtcbiAgICBjb25zdCB0ID0gVGUoITApO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhaKGUpKS5yZWR1Y2UoKHIsIFtuLCBvXSkgPT4gKHJbd2UobildID0gdChvKSwgciksIHt9KTtcbiAgfVxuKTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBXKGUpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIE9iamVjdC5lbnRyaWVzKGUpLm1hcCgoW3QsIHJdKSA9PiBbRyh0KSwgcl0pXG4gICAgKVxuICApO1xufVxuY29uc3QgQWUgPSAoZSkgPT4ge1xuICBjb25zdCB0ID0gXygpLCByID0gXyghMCksIG4gPSAkKCEwKTtcbiAgcmV0dXJuIHooe1xuICAgIGJvdElubGluZTogW1widGdXZWJBcHBCb3RJbmxpbmVcIiwgbl0sXG4gICAgZGVmYXVsdENvbG9yczogW1widGdXZWJBcHBEZWZhdWx0Q29sb3JzXCIsIEkoITApXSxcbiAgICBmdWxsc2NyZWVuOiBbXCJ0Z1dlYkFwcEZ1bGxzY3JlZW5cIiwgbl0sXG4gICAgaW5pdERhdGE6IFtcInRnV2ViQXBwRGF0YVwiLCB5ZSghMCldLFxuICAgIGluaXREYXRhUmF3OiBbXCJ0Z1dlYkFwcERhdGFcIiwgcl0sXG4gICAgcGxhdGZvcm06IFtcInRnV2ViQXBwUGxhdGZvcm1cIiwgdF0sXG4gICAgc2hvd1NldHRpbmdzOiBbXCJ0Z1dlYkFwcFNob3dTZXR0aW5nc1wiLCBuXSxcbiAgICBzdGFydFBhcmFtOiBbXCJ0Z1dlYkFwcFN0YXJ0UGFyYW1cIiwgcl0sXG4gICAgdGhlbWVQYXJhbXM6IFtcInRnV2ViQXBwVGhlbWVQYXJhbXNcIiwgSSgpXSxcbiAgICB2ZXJzaW9uOiBbXCJ0Z1dlYkFwcFZlcnNpb25cIiwgdF1cbiAgfSwgXCJsYXVuY2hQYXJhbXNcIikoZSk7XG59O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIFNlKGUpIHtcbiAgY29uc3Qge1xuICAgIGluaXREYXRhUmF3OiB0LFxuICAgIHN0YXJ0UGFyYW06IHIsXG4gICAgc2hvd1NldHRpbmdzOiBuLFxuICAgIGJvdElubGluZTogbyxcbiAgICBmdWxsc2NyZWVuOiBzLFxuICAgIGRlZmF1bHRDb2xvcnM6IGFcbiAgfSA9IGUsIGMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIHJldHVybiBjLnNldChcInRnV2ViQXBwUGxhdGZvcm1cIiwgZS5wbGF0Zm9ybSksIGMuc2V0KFwidGdXZWJBcHBUaGVtZVBhcmFtc1wiLCAvKiBAX19QVVJFX18gKi8gVyhlLnRoZW1lUGFyYW1zKSksIGMuc2V0KFwidGdXZWJBcHBWZXJzaW9uXCIsIGUudmVyc2lvbiksIHQgJiYgYy5zZXQoXCJ0Z1dlYkFwcERhdGFcIiwgdCksIHIgJiYgYy5zZXQoXCJ0Z1dlYkFwcFN0YXJ0UGFyYW1cIiwgciksIHR5cGVvZiBuID09IFwiYm9vbGVhblwiICYmIGMuc2V0KFwidGdXZWJBcHBTaG93U2V0dGluZ3NcIiwgbiA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgbyA9PSBcImJvb2xlYW5cIiAmJiBjLnNldChcInRnV2ViQXBwQm90SW5saW5lXCIsIG8gPyBcIjFcIiA6IFwiMFwiKSwgdHlwZW9mIHMgPT0gXCJib29sZWFuXCIgJiYgYy5zZXQoXCJ0Z1dlYkFwcEZ1bGxzY3JlZW5cIiwgcyA/IFwiMVwiIDogXCIwXCIpLCBhICYmIGMuc2V0KFwidGdXZWJBcHBEZWZhdWx0Q29sb3JzXCIsIC8qIEBfX1BVUkVfXyAqLyBXKGEpKSwgYy50b1N0cmluZygpO1xufVxuY29uc3QgWCA9IGwoe1xuICBldmVudFR5cGU6IF8oKSxcbiAgZXZlbnREYXRhOiAoZSkgPT4gZVxufSwgXCJtaW5pQXBwc01lc3NhZ2VcIiksIFkgPSBnKFwiZm5cIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIilcbiAgICByZXR1cm4gZTtcbiAgUihlKTtcbn0pO1xuZnVuY3Rpb24gJGUoZSkge1xuICByZXR1cm4gISFlICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZSk7XG59XG5jb25zdCBDZSA9IGwoe1xuICBUZWxlZ3JhbVdlYnZpZXdQcm94eTogbCh7IHBvc3RFdmVudDogWSgpIH0pKClcbn0pO1xuZnVuY3Rpb24gUShlKSB7XG4gIHJldHVybiBDZSgpLmlzVmFsaWQoZSk7XG59XG5mdW5jdGlvbiBOZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93LnNlbGYgIT09IHdpbmRvdy50b3A7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAhMDtcbiAgfVxufVxudmFyIERlID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBqZSA9IChlLCB0LCByKSA9PiB0IGluIGUgPyBEZShlLCB0LCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiByIH0pIDogZVt0XSA9IHIsIGVlID0gKGUsIHQsIHIpID0+IGplKGUsIHR5cGVvZiB0ICE9IFwic3ltYm9sXCIgPyB0ICsgXCJcIiA6IHQsIHIpO1xuY2xhc3MgYiBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IodCwgciwgbikge1xuICAgIHN1cGVyKFxuICAgICAgdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIubWVzc2FnZSA6IHIgfHwgdCxcbiAgICAgIHtcbiAgICAgICAgY2F1c2U6IHR5cGVvZiByID09IFwib2JqZWN0XCIgPyByLmNhdXNlIDogblxuICAgICAgfVxuICAgICksIHRoaXMudHlwZSA9IHQsIHRoaXMubmFtZSA9IFwiVHlwZWRFcnJvclwiLCBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYi5wcm90b3R5cGUpO1xuICB9XG59XG5mdW5jdGlvbiB0ZShlLCB0LCByKSB7XG4gIHJldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIodCwgciksICgpID0+IGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LCByKTtcbn1cbmZ1bmN0aW9uIGsoLi4uZSkge1xuICBjb25zdCB0ID0gZS5mbGF0KDEpO1xuICByZXR1cm4gW1xuICAgIHQucHVzaC5iaW5kKHQpLFxuICAgICgpID0+IHtcbiAgICAgIHQuZm9yRWFjaCgocikgPT4ge1xuICAgICAgICByKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIF07XG59XG5mdW5jdGlvbiBVZShlLCB0KSB7XG4gIHJldHVybiBlIGluc3RhbmNlb2YgYiAmJiBlLnR5cGUgPT09IHQ7XG59XG5mdW5jdGlvbiBMKGUpIHtcbiAgcmV0dXJuICh0KSA9PiBVZSh0LCBlKTtcbn1cbmNvbnN0IHJlID0gXCJFUlJfQUJPUlRFRFwiLCBuZSA9IFwiRVJSX0NBTkNFTEVEXCIsIG9lID0gXCJFUlJfVElNRURfT1VUXCI7XG5mdW5jdGlvbiBNKGUpIHtcbiAgcmV0dXJuIG5ldyBiKHJlLCB7IGNhdXNlOiBlIH0pO1xufVxuY29uc3QgbnQgPSBMKG9lKSwgb3QgPSBMKHJlKSwgc3QgPSBMKG5lKTtcbmZ1bmN0aW9uIEYoZSwgdCkge1xuICByZXR1cm4gZS5yZWplY3QgPSB0LnJlamVjdCwgZTtcbn1cbmNsYXNzIHcgZXh0ZW5kcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IodCwgcikge1xuICAgIGxldCBuLCBvO1xuICAgIHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IChuID0gdCwgbyA9IHIpIDogbyA9IHQ7XG4gICAgbGV0IHMsIGE7XG4gICAgc3VwZXIoKGMsIGkpID0+IHtcbiAgICAgIG8gfHwgKG8gPSB7fSk7XG4gICAgICBjb25zdCB7IGFib3J0U2lnbmFsOiB1IH0gPSBvO1xuICAgICAgaWYgKHUgJiYgdS5hYm9ydGVkKVxuICAgICAgICByZXR1cm4gaShNKHUucmVhc29uKSk7XG4gICAgICBjb25zdCBbZiwgaF0gPSBrKCksIG0gPSAoRSkgPT4gKC4uLmdlKSA9PiAoaCgpLCBFKC4uLmdlKSksIFQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCksIHsgc2lnbmFsOiBBIH0gPSBUO1xuICAgICAgYSA9IG0oKEUpID0+IHtcbiAgICAgICAgVC5hYm9ydChFKSwgaShFKTtcbiAgICAgIH0pLCBzID0gbShjKSwgdSAmJiBmKFxuICAgICAgICB0ZSh1LCBcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICBhKE0odS5yZWFzb24pKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCB7IHRpbWVvdXQ6IEQgfSA9IG87XG4gICAgICBpZiAoRCkge1xuICAgICAgICBjb25zdCBFID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgYShuZXcgYihvZSwgYFRpbWVvdXQgcmVhY2hlZDogJHtEfW1zYCkpO1xuICAgICAgICB9LCBEKTtcbiAgICAgICAgZigoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KEUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIG4gJiYgbihzLCBhLCBBKTtcbiAgICB9KSwgZWUodGhpcywgXCJyZWplY3RcIiksIHRoaXMucmVqZWN0ID0gYTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBCZXR0ZXJQcm9taXNlIGluc3RhbmNlIHVzaW5nIGV4ZWN1dG9yLCByZXNvbHZpbmcgcHJvbWlzZSB3aGVuIGEgcmVzdWx0XG4gICAqIHdhcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIGZuIC0gZnVuY3Rpb24gcmV0dXJuaW5nIHByb21pc2UgcmVzdWx0LlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICovXG4gIHN0YXRpYyB3aXRoRm4odCwgcikge1xuICAgIHJldHVybiBuZXcgdygobiwgbywgcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYSA9IHQocyk7XG4gICAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgUHJvbWlzZSA/IGEudGhlbihuLCBvKSA6IG4oYSk7XG4gICAgICB9IGNhdGNoIChhKSB7XG4gICAgICAgIG8oYSk7XG4gICAgICB9XG4gICAgfSwgcik7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZXNvbHZlXG4gICAqL1xuICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgcmV0dXJuIG5ldyB3KChyKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVqZWN0XG4gICAqL1xuICBzdGF0aWMgcmVqZWN0KHQpIHtcbiAgICByZXR1cm4gbmV3IHcoKHIsIG4pID0+IHtcbiAgICAgIG4odCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHByb21pc2UgZXhlY3V0aW9uLlxuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMucmVqZWN0KG5ldyBiKG5lKSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5jYXRjaFxuICAgKi9cbiAgY2F0Y2godCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB0KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmZpbmFsbHlcbiAgICovXG4gIGZpbmFsbHkodCkge1xuICAgIHJldHVybiBGKHN1cGVyLmZpbmFsbHkodCksIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UudGhlblxuICAgKi9cbiAgdGhlbih0LCByKSB7XG4gICAgcmV0dXJuIEYoc3VwZXIudGhlbih0LCByKSwgdGhpcyk7XG4gIH1cbn1cbmZ1bmN0aW9uIEooZSwgdCkge1xuICByZXR1cm4gZS5yZXNvbHZlID0gdC5yZXNvbHZlLCBlO1xufVxuY2xhc3MgUyBleHRlbmRzIHcge1xuICBjb25zdHJ1Y3Rvcih0LCByKSB7XG4gICAgbGV0IG4sIG87XG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gKG4gPSB0LCBvID0gcikgOiBvID0gdDtcbiAgICBsZXQgcztcbiAgICBzdXBlcigoYSwgYywgaSkgPT4ge1xuICAgICAgcyA9IGEsIG4gJiYgbihhLCBjLCBpKTtcbiAgICB9LCBvKSwgZWUodGhpcywgXCJyZXNvbHZlXCIpLCB0aGlzLnJlc29sdmUgPSBzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEVuaGFuY2VkUHJvbWlzZSBpbnN0YW5jZSB1c2luZyBleGVjdXRvciwgcmVzb2x2aW5nIHByb21pc2Ugd2hlbiBhIHJlc3VsdFxuICAgKiB3YXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSBmbiAtIGZ1bmN0aW9uIHJldHVybmluZyBwcm9taXNlIHJlc3VsdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICBzdGF0aWMgd2l0aEZuKHQsIHIpIHtcbiAgICByZXR1cm4gbmV3IFMoXG4gICAgICAobiwgbywgcykgPT4gdy53aXRoRm4odCwgeyBhYm9ydFNpZ25hbDogcyB9KS50aGVuKG4sIG8pLFxuICAgICAgclxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZXNvbHZlXG4gICAqL1xuICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBTKChyKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVqZWN0XG4gICAqL1xuICBzdGF0aWMgcmVqZWN0KHQpIHtcbiAgICByZXR1cm4gbmV3IFMoKHIsIG4pID0+IHtcbiAgICAgIG4odCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5jYXRjaFxuICAgKi9cbiAgY2F0Y2godCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB0KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmZpbmFsbHlcbiAgICovXG4gIGZpbmFsbHkodCkge1xuICAgIHJldHVybiBKKHN1cGVyLmZpbmFsbHkodCksIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UudGhlblxuICAgKi9cbiAgdGhlbih0LCByKSB7XG4gICAgcmV0dXJuIEooc3VwZXIudGhlbih0LCByKSwgdGhpcyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGF0KGUsIHQpIHtcbiAgcmV0dXJuIG5ldyB3KChyKSA9PiB7XG4gICAgc2V0VGltZW91dChyLCBlKTtcbiAgfSwgeyBhYm9ydFNpZ25hbDogdCB9KTtcbn1cbmZ1bmN0aW9uIHNlKGUpIHtcbiAgcmV0dXJuIGB0YXBwcy8ke2V9YDtcbn1cbmZ1bmN0aW9uIFdlKGUsIHQpIHtcbiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShzZShlKSwgSlNPTi5zdHJpbmdpZnkodCkpO1xufVxuZnVuY3Rpb24geGUoZSkge1xuICBjb25zdCB0ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShzZShlKSk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHQgPyBKU09OLnBhcnNlKHQpIDogdm9pZCAwO1xuICB9IGNhdGNoIHtcbiAgfVxufVxuZnVuY3Rpb24gY3QoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLCAodCkgPT4gYC0ke3QudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIGl0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB1dChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBrZShlLCB0KSB7XG4gIHQgfHwgKHQgPSB7fSk7XG4gIGNvbnN0IHtcbiAgICB0ZXh0Q29sb3I6IHIsXG4gICAgYmdDb2xvcjogbixcbiAgICBzaG91bGRMb2c6IG8gPSAhMFxuICB9ID0gdDtcbiAgZnVuY3Rpb24gcyhhLCAuLi5jKSB7XG4gICAgaWYgKCFvIHx8IHR5cGVvZiBvID09IFwiZnVuY3Rpb25cIiAmJiAhbygpKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGkgPSBcImZvbnQtd2VpZ2h0OmJvbGQ7cGFkZGluZzowIDVweDtib3JkZXItcmFkaXVzOjVweFwiO1xuICAgIGNvbnNvbGVbYV0oXG4gICAgICBgJWMke0ludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1HQlwiLCB7XG4gICAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxuICAgICAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiLFxuICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiAzLFxuICAgICAgICB0aW1lWm9uZTogXCJVVENcIlxuICAgICAgfSkuZm9ybWF0KC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKX0lYyAvICVjJHtlfWAsXG4gICAgICBgJHtpfTtiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWU7Y29sb3I6YmxhY2tgLFxuICAgICAgXCJcIixcbiAgICAgIGAke2l9OyR7ciA/IGBjb2xvcjoke3J9O2AgOiBcIlwifSR7biA/IGBiYWNrZ3JvdW5kLWNvbG9yOiR7bn1gIDogXCJcIn1gLFxuICAgICAgLi4uY1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIFtcbiAgICBmdW5jdGlvbiguLi5hKSB7XG4gICAgICBzKFwibG9nXCIsIC4uLmEpO1xuICAgIH0sXG4gICAgZnVuY3Rpb24oLi4uYSkge1xuICAgICAgcyhcImVycm9yXCIsIC4uLmEpO1xuICAgIH1cbiAgXTtcbn1cbmZ1bmN0aW9uIHB0KGUsIHQpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGUsIHQpO1xufVxuZnVuY3Rpb24gZnQoZSkge1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoZSk7XG59XG5mdW5jdGlvbiBMZShlLCB0KSB7XG4gIHQoKTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiB5KGUsIHQpIHtcbiAgdCB8fCAodCA9IHt9KTtcbiAgY29uc3QgciA9IHQuZXF1YWxzIHx8IE9iamVjdC5pcztcbiAgbGV0IG4gPSBbXSwgbyA9IGU7XG4gIGNvbnN0IHMgPSAodSkgPT4ge1xuICAgIGlmICghcihvLCB1KSkge1xuICAgICAgY29uc3QgZiA9IG87XG4gICAgICBvID0gdSwgTGUoaSwgKCkgPT4ge1xuICAgICAgICBbLi4ubl0uZm9yRWFjaCgoW2gsIG1dKSA9PiB7XG4gICAgICAgICAgaCh1LCBmKSwgbSAmJiBjKGgsICEwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGEodSkge1xuICAgIGNvbnN0IGYgPSB0eXBlb2YgdSAhPSBcIm9iamVjdFwiID8geyBvbmNlOiB1IH0gOiB1O1xuICAgIHJldHVybiB7XG4gICAgICBvbmNlOiBmLm9uY2UgfHwgITEsXG4gICAgICBzaWduYWw6IGYuc2lnbmFsIHx8ICExXG4gICAgfTtcbiAgfVxuICBjb25zdCBjID0gKHUsIGYpID0+IHtcbiAgICBjb25zdCBoID0gYShmKSwgbSA9IG4uZmluZEluZGV4KChbVCwgQV0pID0+IFQgPT09IHUgJiYgQS5vbmNlID09PSBoLm9uY2UgJiYgQS5zaWduYWwgPT09IGguc2lnbmFsKTtcbiAgICBtID49IDAgJiYgbi5zcGxpY2UobSwgMSk7XG4gIH0sIGkgPSBPYmplY3QuYXNzaWduKFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE9lKGkpLCBvO1xuICAgIH0sXG4gICAge1xuICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgbiA9IFtdO1xuICAgICAgfSxcbiAgICAgIHNldDogcyxcbiAgICAgIHJlc2V0KCkge1xuICAgICAgICBzKGUpO1xuICAgICAgfSxcbiAgICAgIHN1Yih1LCBmKSB7XG4gICAgICAgIHJldHVybiBuLnB1c2goW3UsIGEoZildKSwgKCkgPT4gYyh1LCBmKTtcbiAgICAgIH0sXG4gICAgICB1bnN1YjogYyxcbiAgICAgIHVuc3ViQWxsKCkge1xuICAgICAgICBuID0gbi5maWx0ZXIoKHUpID0+IHVbMV0uc2lnbmFsKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIHJldHVybiBpO1xufVxuY29uc3QgVSA9IFtdO1xuZnVuY3Rpb24gT2UoZSkge1xuICBVLmxlbmd0aCAmJiBVW1UubGVuZ3RoIC0gMV0uYWRkKGUpO1xufVxuY29uc3QgYWUgPSAvKiBAX19QVVJFX18gKi8geSghMSksIFtPLCBxZV0gPSAvKiBAX19QVVJFX18gKi8ga2UoXCJCcmlkZ2VcIiwge1xuICBiZ0NvbG9yOiBcIiM5MTQ3ZmZcIixcbiAgdGV4dENvbG9yOiBcIndoaXRlXCIsXG4gIHNob3VsZExvZzogYWVcbn0pLCBJZSA9IHtcbiAgY2xpcGJvYXJkX3RleHRfcmVjZWl2ZWQ6IGwoe1xuICAgIHJlcV9pZDogXygpLFxuICAgIGRhdGE6IChlKSA9PiBlID09PSBudWxsID8gZSA6IF8oITApKGUpXG4gIH0sIFwiY2xpcGJvYXJkX3RleHRfcmVjZWl2ZWRcIiksXG4gIGN1c3RvbV9tZXRob2RfaW52b2tlZDogbCh7XG4gICAgcmVxX2lkOiBfKCksXG4gICAgcmVzdWx0OiAoZSkgPT4gZSxcbiAgICBlcnJvcjogXyghMClcbiAgfSwgXCJjdXN0b21fbWV0aG9kX2ludm9rZWRcIiksXG4gIHBvcHVwX2Nsb3NlZDogZyhcInBvcHVwX2Nsb3NlZFwiLCAoZSkgPT4gZSA/IGwoe1xuICAgIGJ1dHRvbl9pZDogKHQpID0+IHQgPT0gbnVsbCA/IHZvaWQgMCA6IF8oKSh0KVxuICB9KSgpKGUpIDoge30pLFxuICB2aWV3cG9ydF9jaGFuZ2VkOiBsKHtcbiAgICBoZWlnaHQ6IFAoKSxcbiAgICB3aWR0aDogKGUpID0+IGUgPT0gbnVsbCA/IHdpbmRvdy5pbm5lcldpZHRoIDogUCgpKGUpLFxuICAgIGlzX3N0YXRlX3N0YWJsZTogJCgpLFxuICAgIGlzX2V4cGFuZGVkOiAkKClcbiAgfSwgXCJ2aWV3cG9ydF9jaGFuZ2VkXCIpXG59O1xuZnVuY3Rpb24gTWUoZSkge1xuICBjb25zdCB0ID0gd2luZG93LCBbLCByXSA9IGsoXG4gICAgLy8gQWRkIGxpc3RlbmVyLCB3aGljaCBoYW5kbGVzIGV2ZW50cyBzZW50IGZyb20gdGhlIFRlbGVncmFtIHdlYiBhcHBsaWNhdGlvbiBhbmQgYWxzbyBldmVudHNcbiAgICAvLyBnZW5lcmF0ZWQgYnkgdGhlIGxvY2FsIGVtaXRFdmVudCBmdW5jdGlvbi5cbiAgICB0ZSh0LCBcIm1lc3NhZ2VcIiwgKG4pID0+IHtcbiAgICAgIGlmIChuLnNvdXJjZSAhPT0gdC5wYXJlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGxldCBvO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbyA9IFgoKShuLmRhdGEpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZXZlbnRUeXBlOiBzLCBldmVudERhdGE6IGEgfSA9IG8sIGMgPSBJZVtzXTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGkgPSBjID8gYygpKGEpIDogYTtcbiAgICAgICAgTyhcIkV2ZW50IHJlY2VpdmVkOlwiLCBpID8geyBldmVudFR5cGU6IHMsIGV2ZW50RGF0YTogaSB9IDogeyBldmVudFR5cGU6IHMgfSksIGUoW3MsIGldKTtcbiAgICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgICAgcWUoXG4gICAgICAgICAgW1xuICAgICAgICAgICAgYEFuIGVycm9yIG9jY3VycmVkIHByb2Nlc3NpbmcgdGhlIFwiJHtzfVwiIGV2ZW50IGZyb20gdGhlIFRlbGVncmFtIGFwcGxpY2F0aW9uLmAsXG4gICAgICAgICAgICBcIlBsZWFzZSwgZmlsZSBhbiBpc3N1ZSBoZXJlOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL2dpdGh1Yi5jb20vVGVsZWdyYW0tTWluaS1BcHBzL3RlbGVncmFtLWFwcHMvaXNzdWVzL25ldy9jaG9vc2VcIlxuICAgICAgICAgIF0uam9pbihgXG5gKSxcbiAgICAgICAgICBvLFxuICAgICAgICAgIGlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KVxuICApO1xuICByZXR1cm4gcjtcbn1cbmNvbnN0IEMgPSAvKiBAX19QVVJFX18gKi8geSgpLCBOID0gLyogQF9fUFVSRV9fICovIHkoKTtcbmZ1bmN0aW9uIGNlKCkge1xuICByZXR1cm4gTigpIHx8IE4uc2V0KE1lKEMuc2V0KSksIEM7XG59XG5jb25zdCB2ID0gLyogQF9fUFVSRV9fICovIHkoe30pO1xuZnVuY3Rpb24gaWUoZSkge1xuICBsZXQgdCA9IHYoKVtlXTtcbiAgcmV0dXJuIHQgfHwgKHQgPSAvKiBAX19QVVJFX18gKi8geSh2b2lkIDAsIHtcbiAgICBlcXVhbHMoKSB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9KSwgY2UoKS5zdWIoKHIpID0+IHtcbiAgICByICYmIHJbMF0gPT09IGUgJiYgdC5zZXQoclsxXSk7XG4gIH0pLCB2LnNldCh7IC4uLnYoKSwgW2VdOiB0IH0pKSwgdDtcbn1cbmZ1bmN0aW9uIEZlKGUsIHQsIHIpIHtcbiAgcmV0dXJuIGllKGUpLnN1Yih0LCByKTtcbn1cbmNvbnN0IEplID0gXCJFUlJfTUVUSE9EX1VOU1VQUE9SVEVEXCIsIEJlID0gXCJFUlJfUkVUUklFVkVfTFBfRkFJTEVEXCIsIEhlID0gXCJFUlJfTUVUSE9EX1BBUkFNRVRFUl9VTlNVUFBPUlRFRFwiLCBHZSA9IFwiRVJSX1VOS05PV05fRU5WXCIsIEtlID0gXCJFUlJfSU5WT0tFX0NVU1RPTV9NRVRIT0RfUkVTUE9OU0VcIiwgdWUgPSAvKiBAX19QVVJFX18gKi8geShcImh0dHBzOi8vd2ViLnRlbGVncmFtLm9yZ1wiKTtcbmZ1bmN0aW9uIHBlKGUsIHQpIHtcbiAgTyhcIlBvc3RpbmcgZXZlbnQ6XCIsIHQgPyB7IGV2ZW50VHlwZTogZSwgZXZlbnREYXRhOiB0IH0gOiB7IGV2ZW50VHlwZTogZSB9KTtcbiAgY29uc3QgciA9IHdpbmRvdztcbiAgaWYgKFEocikpIHtcbiAgICByLlRlbGVncmFtV2Vidmlld1Byb3h5LnBvc3RFdmVudChlLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG4gPSBKU09OLnN0cmluZ2lmeSh7IGV2ZW50VHlwZTogZSwgZXZlbnREYXRhOiB0IH0pO1xuICBpZiAoTmUoKSlcbiAgICByZXR1cm4gci5wYXJlbnQucG9zdE1lc3NhZ2UobiwgdWUoKSk7XG4gIGNvbnN0IHsgZXh0ZXJuYWw6IG8gfSA9IHI7XG4gIGlmIChsKHsgbm90aWZ5OiBZKCkgfSkoKS5pc1ZhbGlkKG8pKSB7XG4gICAgby5ub3RpZnkobik7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRocm93IG5ldyBiKEdlKTtcbn1cbmZ1bmN0aW9uIGZlKGUsIHQsIHIpIHtcbiAgciB8fCAociA9IHt9KTtcbiAgY29uc3QgeyBjYXB0dXJlOiBuIH0gPSByLCBbbywgc10gPSBrKCk7XG4gIHJldHVybiBuZXcgdygoYSkgPT4ge1xuICAgIChBcnJheS5pc0FycmF5KHQpID8gdCA6IFt0XSkuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgbyhcbiAgICAgICAgRmUoYywgKGkpID0+IHtcbiAgICAgICAgICAoIW4gfHwgKEFycmF5LmlzQXJyYXkodCkgPyBuKHtcbiAgICAgICAgICAgIGV2ZW50OiBjLFxuICAgICAgICAgICAgcGF5bG9hZDogaVxuICAgICAgICAgIH0pIDogbihpKSkpICYmIGEoaSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pLCAoci5wb3N0RXZlbnQgfHwgcGUpKGUsIHIucGFyYW1zKTtcbiAgfSwgcikuZmluYWxseShzKTtcbn1cbmZ1bmN0aW9uIHEoZSkge1xuICByZXR1cm4gQWUoKShlKTtcbn1cbmZ1bmN0aW9uIF9lKGUpIHtcbiAgcmV0dXJuIHEoXG4gICAgZS5yZXBsYWNlKC9eW14/I10qWz8jXS8sIFwiXCIpLnJlcGxhY2UoL1s/I10vZywgXCImXCIpXG4gICk7XG59XG5mdW5jdGlvbiBWZSgpIHtcbiAgcmV0dXJuIF9lKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbn1cbmZ1bmN0aW9uIFplKCkge1xuICBjb25zdCBlID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIilbMF07XG4gIGlmICghZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IGZpcnN0IG5hdmlnYXRpb24gZW50cnkuXCIpO1xuICByZXR1cm4gX2UoZS5uYW1lKTtcbn1cbmNvbnN0IHplID0gXCJsYXVuY2hQYXJhbXNcIjtcbmZ1bmN0aW9uIFhlKCkge1xuICByZXR1cm4gcSh4ZSh6ZSkgfHwgXCJcIik7XG59XG5mdW5jdGlvbiBsZShlKSB7XG4gIFdlKFwibGF1bmNoUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyBTZShlKSk7XG59XG5mdW5jdGlvbiBiZShlKSB7XG4gIHJldHVybiBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgKyAoZS5jYXVzZSA/IGBcbiAgJHtiZShlLmNhdXNlKX1gIDogXCJcIikgOiBKU09OLnN0cmluZ2lmeShlKTtcbn1cbmZ1bmN0aW9uIFllKCkge1xuICBjb25zdCBlID0gW107XG4gIGZvciAoY29uc3QgdCBvZiBbXG4gICAgLy8gVHJ5IHRvIHJldHJpZXZlIGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24uIFRoaXMgbWV0aG9kIGNhbiByZXR1cm5cbiAgICAvLyBub3RoaW5nIGluIGNhc2UsIGxvY2F0aW9uIHdhcyBjaGFuZ2VkLCBhbmQgdGhlbiB0aGUgcGFnZSB3YXMgcmVsb2FkZWQuXG4gICAgVmUsXG4gICAgLy8gVGhlbiwgdHJ5IHVzaW5nIHRoZSBsb3dlciBsZXZlbCBBUEkgLSB3aW5kb3cucGVyZm9ybWFuY2UuXG4gICAgWmUsXG4gICAgLy8gRmluYWxseSwgdHJ5IHRvIGV4dHJhY3QgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSB0aGUgc2Vzc2lvbiBzdG9yYWdlLlxuICAgIFhlXG4gIF0pXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHIgPSB0KCk7XG4gICAgICByZXR1cm4gbGUociksIHI7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgZS5wdXNoKHIpO1xuICAgIH1cbiAgdGhyb3cgbmV3IGIoQmUsIFtcbiAgICBcIlVuYWJsZSB0byByZXRyaWV2ZSBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIGFueSBrbm93biBzb3VyY2UuIFBlcmhhcHMsIHlvdSBoYXZlIG9wZW5lZCB5b3VyIGFwcCBvdXRzaWRlIFRlbGVncmFtP1wiLFxuICAgIFwi8J+TliBSZWZlciB0byBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uOlwiLFxuICAgIFwiaHR0cHM6Ly9kb2NzLnRlbGVncmFtLW1pbmktYXBwcy5jb20vcGFja2FnZXMvdGVsZWdyYW0tYXBwcy1icmlkZ2UvZW52aXJvbm1lbnRcIixcbiAgICBcIkNvbGxlY3RlZCBlcnJvcnM6XCIsXG4gICAgLi4uZS5tYXAoKHQpID0+IGDigJQgJHtiZSh0KX1gKVxuICBdLmpvaW4oYFxuYCkpO1xufVxuZnVuY3Rpb24gX3QoZSkge1xuICBpZiAoZSA9PT0gXCJzaW1wbGVcIilcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFllKCksICEwO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgcmV0dXJuIHcud2l0aEZuKGFzeW5jICgpID0+IHtcbiAgICBpZiAoUSh3aW5kb3cpKVxuICAgICAgcmV0dXJuICEwO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZmUoXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIiwgXCJ0aGVtZV9jaGFuZ2VkXCIsIHsgdGltZW91dDogMTAwIH0pLCAhMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0sIGUpO1xufVxuZnVuY3Rpb24geChlLCB0KSB7XG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlXCIsIHtcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7IGV2ZW50VHlwZTogZSwgZXZlbnREYXRhOiB0IH0pLFxuICAgIC8vIFdlIHNwZWNpZnkgd2luZG93LnBhcmVudCB0byBpbWl0YXRlIHRoZSBjYXNlLCB0aGUgcGFyZW50IGlmcmFtZSBzZW50IHVzIHRoaXMgZXZlbnQuXG4gICAgc291cmNlOiB3aW5kb3cucGFyZW50XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIFFlKGUsIHQpIHtcbiAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXZlbnRUeXBlOiByIH0gPSBYKCkodCk7XG4gICAgICByID09PSBcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiICYmIHgoXCJ0aGVtZV9jaGFuZ2VkXCIsIHtcbiAgICAgICAgdGhlbWVfcGFyYW1zOiBKU09OLnBhcnNlKC8qIEBfX1BVUkVfXyAqLyBXKGUpKVxuICAgICAgfSksIHIgPT09IFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIgJiYgeChcInZpZXdwb3J0X2NoYW5nZWRcIiwge1xuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICBpc19zdGF0ZV9zdGFibGU6ICEwLFxuICAgICAgICBpc19leHBhbmRlZDogITBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbn1cbmZ1bmN0aW9uIGx0KGUpIHtcbiAgdmFyIG47XG4gIGNvbnN0IHQgPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gcShlKSA6IGU7XG4gIGxlKHQpO1xuICBjb25zdCByID0gKG4gPSB3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkpID09IG51bGwgPyB2b2lkIDAgOiBuLnBvc3RFdmVudDtcbiAgd2luZG93LlRlbGVncmFtV2Vidmlld1Byb3h5ID0ge1xuICAgIHBvc3RFdmVudChvLCBzKSB7XG4gICAgICBRZSh0LnRoZW1lUGFyYW1zLCBKU09OLnN0cmluZ2lmeSh7IGV2ZW50VHlwZTogbywgZXZlbnREYXRhOiBzIH0pKSwgciA9PSBudWxsIHx8IHIobywgcyk7XG4gICAgfVxuICB9LCBPKFwiRW52aXJvbm1lbnQgd2FzIG1vY2tlZCBieSB0aGUgbW9ja1RlbGVncmFtRW52IGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gYnQoKSB7XG4gIFtcbiAgICBbXCJUZWxlZ3JhbUdhbWVQcm94eV9yZWNlaXZlRXZlbnRcIl0sXG4gICAgLy8gV2luZG93cyBQaG9uZS5cbiAgICBbXCJUZWxlZ3JhbUdhbWVQcm94eVwiLCBcInJlY2VpdmVFdmVudFwiXSxcbiAgICAvLyBEZXNrdG9wLlxuICAgIFtcIlRlbGVncmFtXCIsIFwiV2ViVmlld1wiLCBcInJlY2VpdmVFdmVudFwiXVxuICAgIC8vIEFuZHJvaWQgYW5kIGlPUy5cbiAgXS5mb3JFYWNoKChlKSA9PiB7XG4gICAgbGV0IHQgPSB3aW5kb3c7XG4gICAgZS5mb3JFYWNoKChyLCBuLCBvKSA9PiB7XG4gICAgICBpZiAobiA9PT0gby5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRbcl0gPSB4O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByIGluIHQgfHwgKHRbcl0gPSB7fSksIHQgPSB0W3JdO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGd0KCkge1xuICBbXCJUZWxlZ3JhbUdhbWVQcm94eV9yZWNlaXZlRXZlbnRcIiwgXCJUZWxlZ3JhbUdhbWVQcm94eVwiLCBcIlRlbGVncmFtXCJdLmZvckVhY2goKGUpID0+IHtcbiAgICBkZWxldGUgd2luZG93W2VdO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHd0KGUsIHQsIHIpIHtcbiAgaWUoZSkudW5zdWIodCwgcik7XG59XG5mdW5jdGlvbiBodChlLCB0KSB7XG4gIHJldHVybiBjZSgpLnN1YihlLCB0KTtcbn1cbmZ1bmN0aW9uIG10KGUsIHQpIHtcbiAgQy51bnN1YihlLCB0KTtcbn1cbmZ1bmN0aW9uIGV0KGUpIHtcbiAgcmV0dXJuICh7IHJlcV9pZDogdCB9KSA9PiB0ID09PSBlO1xufVxuZnVuY3Rpb24gQihlKSB7XG4gIHJldHVybiBlLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbn1cbmZ1bmN0aW9uIHR0KGUsIHQpIHtcbiAgY29uc3QgciA9IEIoZSksIG4gPSBCKHQpLCBvID0gTWF0aC5tYXgoci5sZW5ndGgsIG4ubGVuZ3RoKTtcbiAgZm9yIChsZXQgcyA9IDA7IHMgPCBvOyBzICs9IDEpIHtcbiAgICBjb25zdCBhID0gcltzXSB8fCAwLCBjID0gbltzXSB8fCAwO1xuICAgIGlmIChhICE9PSBjKVxuICAgICAgcmV0dXJuIGEgPiBjID8gMSA6IC0xO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gcChlLCB0KSB7XG4gIHJldHVybiB0dChlLCB0KSA8PSAwO1xufVxuZnVuY3Rpb24gSChlLCB0LCByKSB7XG4gIGlmICh0eXBlb2YgciA9PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9vcGVuX2xpbmtcIikge1xuICAgICAgaWYgKHQgPT09IFwidHJ5X2luc3RhbnRfdmlld1wiKVxuICAgICAgICByZXR1cm4gcChcIjYuNFwiLCByKTtcbiAgICAgIGlmICh0ID09PSBcInRyeV9icm93c2VyXCIpXG4gICAgICAgIHJldHVybiBwKFwiNy42XCIsIHIpO1xuICAgIH1cbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiAmJiB0ID09PSBcImNvbG9yXCIpXG4gICAgICByZXR1cm4gcChcIjYuOVwiLCByKTtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX2Nsb3NlXCIgJiYgdCA9PT0gXCJyZXR1cm5fYmFja1wiKVxuICAgICAgcmV0dXJuIHAoXCI3LjZcIiwgcik7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiICYmIHQgPT09IFwiaGFzX3NoaW5lX2VmZmVjdFwiKVxuICAgICAgcmV0dXJuIHAoXCI3LjEwXCIsIHIpO1xuICB9XG4gIHN3aXRjaCAoZSkge1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fdGdfbGlua1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5faW52b2ljZVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX2JhY2tfYnV0dG9uXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2JhY2tncm91bmRfY29sb3JcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfdHJpZ2dlcl9oYXB0aWNfZmVlZGJhY2tcIjpcbiAgICAgIHJldHVybiBwKFwiNi4xXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fcG9wdXBcIjpcbiAgICAgIHJldHVybiBwKFwiNi4yXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2Nsb3NlX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZWFkX3RleHRfZnJvbV9jbGlwYm9hcmRcIjpcbiAgICAgIHJldHVybiBwKFwiNi40XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3N3aXRjaF9pbmxpbmVfcXVlcnlcIjpcbiAgICAgIHJldHVybiBwKFwiNi43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF93cml0ZV9hY2Nlc3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3Bob25lXCI6XG4gICAgICByZXR1cm4gcChcIjYuOVwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zZXR0aW5nc19idXR0b25cIjpcbiAgICAgIHJldHVybiBwKFwiNi4xMFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9nZXRfaW5mb1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X29wZW5fc2V0dGluZ3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9yZXF1ZXN0X2FjY2Vzc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYXV0aFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3VwZGF0ZV90b2tlblwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjJcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc3dpcGVfYmVoYXZpb3JcIjpcbiAgICAgIHJldHVybiBwKFwiNy43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NoYXJlX3RvX3N0b3J5XCI6XG4gICAgICByZXR1cm4gcChcIjcuOFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zZWNvbmRhcnlfYnV0dG9uXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2JvdHRvbV9iYXJfY29sb3JcIjpcbiAgICAgIHJldHVybiBwKFwiNy4xMFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3NhZmVfYXJlYVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfY29udGVudF9zYWZlX2FyZWFcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X2Z1bGxzY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9leGl0X2Z1bGxzY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfZW1vamlfc3RhdHVzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYWRkX3RvX2hvbWVfc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfY2hlY2tfaG9tZV9zY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X2Vtb2ppX3N0YXR1c19hY2Nlc3NcIjpcbiAgICAgIHJldHVybiBwKFwiOC4wXCIsIHQpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gW1xuICAgICAgICBcImlmcmFtZV9yZWFkeVwiLFxuICAgICAgICBcImlmcmFtZV93aWxsX3JlbG9hZFwiLFxuICAgICAgICBcIndlYl9hcHBfY2xvc2VcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2RhdGFfc2VuZFwiLFxuICAgICAgICBcIndlYl9hcHBfZXhwYW5kXCIsXG4gICAgICAgIFwid2ViX2FwcF9vcGVuX2xpbmtcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlYWR5XCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIsXG4gICAgICAgIFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiLFxuICAgICAgICBcIndlYl9hcHBfc2V0dXBfY2xvc2luZ19iZWhhdmlvclwiXG4gICAgICBdLmluY2x1ZGVzKGUpO1xuICB9XG59XG5mdW5jdGlvbiBkdChlLCB0KSB7XG4gIHQgfHwgKHQgPSBcInN0cmljdFwiKTtcbiAgY29uc3QgciA9IHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IHQgOiAobikgPT4ge1xuICAgIGNvbnN0IHsgbWV0aG9kOiBvLCB2ZXJzaW9uOiBzIH0gPSBuO1xuICAgIGxldCBhLCBjO1xuICAgIGlmIChcInBhcmFtXCIgaW4gbiA/IChhID0gYFBhcmFtZXRlciBcIiR7bi5wYXJhbX1cIiBvZiBcIiR7b31cIiBtZXRob2QgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtzfWAsIGMgPSBIZSkgOiAoYSA9IGBNZXRob2QgXCIke299XCIgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtzfWAsIGMgPSBKZSksIHQgPT09IFwic3RyaWN0XCIpXG4gICAgICB0aHJvdyBuZXcgYihjLCBhKTtcbiAgICByZXR1cm4gY29uc29sZS53YXJuKGEpO1xuICB9O1xuICByZXR1cm4gKG4sIG8pID0+IEgobiwgZSkgPyAkZShvKSAmJiBuID09PSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiICYmIFwiY29sb3JcIiBpbiBvICYmICFIKG4sIFwiY29sb3JcIiwgZSkgPyByKHsgdmVyc2lvbjogZSwgbWV0aG9kOiBuLCBwYXJhbTogXCJjb2xvclwiIH0pIDogcGUobiwgbykgOiByKHsgdmVyc2lvbjogZSwgbWV0aG9kOiBuIH0pO1xufVxuZnVuY3Rpb24gRXQoZSwgdCwgciwgbikge1xuICByZXR1cm4gZmUoXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCIsIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIsIHtcbiAgICAuLi5uIHx8IHt9LFxuICAgIHBhcmFtczogeyBtZXRob2Q6IGUsIHBhcmFtczogdCwgcmVxX2lkOiByIH0sXG4gICAgY2FwdHVyZTogZXQocilcbiAgfSkudGhlbigoeyByZXN1bHQ6IG8sIGVycm9yOiBzIH0pID0+IHtcbiAgICBpZiAocylcbiAgICAgIHRocm93IG5ldyBiKEtlLCBzKTtcbiAgICByZXR1cm4gbztcbiAgfSk7XG59XG5mdW5jdGlvbiBydChlKSB7XG4gIGUudW5zdWJBbGwoKSwgZS5yZXNldCgpO1xufVxuZnVuY3Rpb24geXQoKSB7XG4gIHZhciBlO1xuICAoZSA9IE4oKSkgPT0gbnVsbCB8fCBlKCksIFtcbiAgICAuLi5PYmplY3QudmFsdWVzKHYoKSksXG4gICAgdixcbiAgICBDLFxuICAgIE4sXG4gICAgdWUsXG4gICAgYWVcbiAgXS5mb3JFYWNoKHJ0KTtcbn1cbmV4cG9ydCB7XG4gIGFlIGFzICRkZWJ1ZyxcbiAgdWUgYXMgJHRhcmdldE9yaWdpbixcbiAgdyBhcyBDYW5jZWxhYmxlUHJvbWlzZSxcbiAgcmUgYXMgRVJSX0FCT1JURUQsXG4gIG5lIGFzIEVSUl9DQU5DRUxFRCxcbiAgS2UgYXMgRVJSX0NVU1RPTV9NRVRIT0RfRVJSX1JFU1BPTlNFLFxuICBIZSBhcyBFUlJfTUVUSE9EX1BBUkFNRVRFUl9VTlNVUFBPUlRFRCxcbiAgSmUgYXMgRVJSX01FVEhPRF9VTlNVUFBPUlRFRCxcbiAgQmUgYXMgRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRCxcbiAgb2UgYXMgRVJSX1RJTUVEX09VVCxcbiAgR2UgYXMgRVJSX1VOS05PV05fRU5WLFxuICBTIGFzIEVuaGFuY2VkUHJvbWlzZSxcbiAgYiBhcyBUeXBlZEVycm9yLFxuICB0ZSBhcyBhZGRFdmVudExpc3RlbmVyLFxuICBjdCBhcyBjYW1lbFRvS2ViYWIsXG4gIGl0IGFzIGNhbWVsVG9TbmFrZSxcbiAgZXQgYXMgY2FwdHVyZVNhbWVSZXEsXG4gIHR0IGFzIGNvbXBhcmVWZXJzaW9ucyxcbiAgTSBhcyBjcmVhdGVBYm9ydEVycm9yLFxuICBrIGFzIGNyZWF0ZUNiQ29sbGVjdG9yLFxuICBrZSBhcyBjcmVhdGVMb2dnZXIsXG4gIGR0IGFzIGNyZWF0ZVBvc3RFdmVudCxcbiAgTCBhcyBjcmVhdGVUeXBlZEVycm9yUHJlZGljYXRlLFxuICBidCBhcyBkZWZpbmVFdmVudEhhbmRsZXJzLFxuICBmdCBhcyBkZWxldGVDc3NWYXIsXG4gIHggYXMgZW1pdE1pbmlBcHBzRXZlbnQsXG4gIHhlIGFzIGdldFN0b3JhZ2VWYWx1ZSxcbiAgUSBhcyBoYXNXZWJ2aWV3UHJveHksXG4gIEV0IGFzIGludm9rZUN1c3RvbU1ldGhvZCxcbiAgb3QgYXMgaXNBYm9ydEVycm9yLFxuICBzdCBhcyBpc0NhbmNlbGVkRXJyb3IsXG4gIE5lIGFzIGlzSWZyYW1lLFxuICBfdCBhcyBpc1RNQSxcbiAgbnQgYXMgaXNUaW1lb3V0RXJyb3IsXG4gIGx0IGFzIG1vY2tUZWxlZ3JhbUVudixcbiAgd3QgYXMgb2ZmLFxuICBGZSBhcyBvbixcbiAgcGUgYXMgcG9zdEV2ZW50LFxuICBndCBhcyByZW1vdmVFdmVudEhhbmRsZXJzLFxuICBmZSBhcyByZXF1ZXN0LFxuICB5dCBhcyByZXNldFBhY2thZ2VTdGF0ZSxcbiAgWWUgYXMgcmV0cmlldmVMYXVuY2hQYXJhbXMsXG4gIHB0IGFzIHNldENzc1ZhcixcbiAgV2UgYXMgc2V0U3RvcmFnZVZhbHVlLFxuICBhdCBhcyBzbGVlcCxcbiAgdXQgYXMgc25ha2VUb0NhbWVsLFxuICBodCBhcyBzdWJzY3JpYmUsXG4gIEggYXMgc3VwcG9ydHMsXG4gIG10IGFzIHVuc3Vic2NyaWJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ })

};
;